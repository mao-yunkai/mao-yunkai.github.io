# 训练
## 文件结构
项目文件结构
```
- data # 数据存放文件夹
	- data1 # 数据集名称
	- ...
- datasets # 数据集定义文件夹
	- data1 # 数据集名称
	- ...
- models # 模型定义文件夹
	- model1 # 模型名称
	- ...
- experiments # 实验结果文件夹
- test.py # 测试代码
- train.py # 训练代码
- util.py # 通用工具代码
- workspace.ipynb # 工作空间
```
实验结果文件结构
```
- experiments
	- 2024-10-15-01
		- checkpoints
			- checkpoint_20.pth
		- best_model.pth
		- training_log.txt
		- test_01
			- pred
			- vis
			- testing_log.txt
			- time_stats.prof
		...
	...
```
- 每次训练模型，新建一个文件夹
- 文件夹内保存最佳模型
- 用一个文件夹保存节点模型
- 保存训练模型的日志
	- 参数
	- 迭代次数
	- 测试集性能指标
- 每次推理实验，新建一个文件夹
- 每次测试需要记录
	- 推理结果
	- 耗时统计
	- 推理日志
		- 整体精度
		- 单张精度
		- 推理速度
	- 推理结果可视化
## 训练过程
1. Epoch - 使用训练集的全部数据对模型进行一次完整训练。
2. Batch - 使用训练集的一部分数据对模型权重进行一次反向传播的参数更新，称为一次训练。
## 结果保存
### 使用logging库
```
def log_string(str):
	logger.info(str)
	print(str)
log_dir = os.path.join(exp_dir, 'logs')
os.makedirs(log_dir, exist_ok=True)
logger=logging.getLogger("Train_PolarNet")
logger.setLevel(logging.INFO)
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
file_handler = logging.FileHandler('%s/eval.txt' % log_dir)
file_handler.setLevel(logging.INFO)
file_handler.setFormatter(formatter)
logger.addHandler(file_handler)
log_string('PARAMETER ...')
log_string(args)
```

### 使用TensorBoard
[torch.utils.tensorboard — PyTorch 2.7 documentation](https://docs.pytorch.org/docs/stable/tensorboard.html)
```
tensorbard --logdir=./runs
```